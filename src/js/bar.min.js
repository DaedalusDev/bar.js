!function(a){a.createObject("bar.store.articles",{1:{id:1,cat:0,label:"Coca-cola",desc:"Attention aux bulles !",prix:1,img:"coca.jpg"},2:{id:2,cat:0,label:"Coca zero",desc:"Les bulles sont sans sucre !",prix:1,img:"coca-zero.jpg"},3:{id:3,cat:0,label:"Jus d'orange",desc:"Quand c'est trop c'est tropico.",prix:1,img:"jus-orange.jpg"},4:{id:4,cat:0,label:"Jus de pomme",desc:"C'est trognon comme boisson.",prix:1,img:"jus-pomme.jpg"},5:{id:5,cat:0,label:"Jus d'abricot",desc:"Sans noyau.",prix:1,img:"jus-abricot.jpg"},6:{id:6,cat:0,label:"Jus d'ananas",desc:"Les ananas de la belle...",prix:1,img:"jus-ananas.jpg"},7:{id:7,cat:0,label:"Jus de pamplemousse",desc:"Meilleur avec du vin blanc.",prix:1,img:"jus-pamplemousse.jpg"},8:{id:8,cat:0,label:"Jus de tomate",desc:"La tomate est un fruit, c'est un fait.",prix:1,img:"jus-tomate.jpg"},9:{id:9,cat:0,label:"Jus de fraise",desc:"La boisson de charlotte.",prix:1,img:"jus-fraise.jpg"},10:{id:10,cat:0,label:"Orangina",desc:"Secouez, sinon la pulpe, elle reste en bas.",prix:1,img:"orangina.jpg"},11:{id:11,cat:0,label:"Schweppes agrum",desc:"What did you expect.",prix:1,img:"schweppes-agrum.jpg"},12:{id:12,cat:0,label:"Limonade",desc:"Bulle + citron + eau.",prix:1,img:"limonade.jpg"},13:{id:13,cat:0,label:"Perrier",desc:"Un sirop dedans ?",prix:1,img:"perrier.jpg"},14:{id:14,cat:0,label:"Evian",desc:"(De quel massif montagneux ca vient çà déjà ?)",prix:1,img:"evian.jpg"},15:{id:15,cat:0,label:"Cristaline",desc:"C'est clair",prix:.5,img:"cristaline.jpg"},16:{id:16,cat:0,label:"la Seinoise",desc:"Riche en urinium, et en oligo-excréments.",prix:.5,img:"seinoise.jpg"},17:{id:17,cat:1,label:"Grim (bouteille)",desc:"La bière des hommes",prix:1.5,img:"grimbergen.jpg"},18:{id:18,cat:1,label:"Grim Rouge",desc:"La bière des femmes",prix:1.5,img:"grim-rouge.jpg"},19:{id:19,cat:1,label:"1664",desc:"Idéal avant de retourner sur le chantier",prix:1.3,img:"1664-pression.jpg"},20:{id:20,cat:1,label:"1664 (bouteille)",desc:"Idéal avant de retourner sur le chantier",prix:1.5,img:"1664.jpg"},21:{id:21,cat:1,label:"Panaché",desc:"Servi avec panache !",prix:1.3,img:"panache.jpg"},22:{id:22,cat:1,label:"Monaco",desc:"Une peu de fruit pour les vitamines !",prix:1.3,img:"monaco.jpg"},23:{id:23,cat:1,label:"PCB",desc:"Un picon ch'tit biloute !",prix:1.8,img:"picon.jpg"},24:{id:24,cat:1,label:"Bière du mois",desc:"Selon arrivages",prix:1.5,img:"bdm.jpg"},25:{id:25,cat:2,label:"Martini",desc:"Martini dry... Avec ou sans olives ?",prix:1.5,img:"martini.jpg"},26:{id:26,cat:2,label:"Muscat",desc:"Une velle robe dorée",prix:1.5,img:"muscat.jpg"},27:{id:27,cat:2,label:"Pineau",desc:"À commander en charentaises",prix:1.5},28:{id:28,cat:2,label:"Rosé pamplemousse",desc:"Teneur en fruit non garantie",prix:1.4},29:{id:29,cat:2,label:"Vin blanc",desc:"Belle robe dorée",prix:1.4},30:{id:30,cat:2,label:"Vin mousseux",desc:"Le vin qui pique !",prix:1.4},31:{id:31,cat:2,label:"Cidre (75cl)",desc:"Mangez des pommes !",prix:5},32:{id:32,cat:2,label:"Kir vin blanc",prix:1.5},33:{id:33,cat:2,label:"Kir royal",desc:"Mure ou cassis ?",prix:1.5},34:{id:34,cat:3,label:"Chips",desc:"Le roi de la pomme de terre",prix:2,img:"chips.jpg"},35:{id:35,cat:3,label:"Saucisson",desc:'Préciser "A l\'ail" si possible',prix:2.9,img:"saucisson.jpg"},36:{id:36,cat:3,label:"Chorizo",desc:"Aux épices",prix:2.9},37:{id:37,cat:3,label:"Olives",desc:"Fraichement cueillies dans le bocal",prix:2},38:{id:38,cat:3,label:"Carre filet",desc:"Aucune idée mais c'est sur la carte....",prix:3.5},39:{id:39,cat:4,label:"Espresso",desc:"Du bon nectar.",prix:.5,img:"espresso.jpg"},40:{id:40,cat:4,label:"Double Espresso",desc:"Que j'aime ta couleur...",prix:1,img:"doubleEspresso.jpg"},41:{id:41,cat:4,label:"Décaféiné",desc:"C'est pas du café en gros ?",prix:.5,img:"decafeine.jpg"},42:{id:42,cat:4,label:"Chocolat",desc:"Le meilleurs c'est choky !",prix:.5,img:"chocolat.jpg"},43:{id:43,cat:4,label:"Capuccino",desc:"À l'italienne",prix:.5,img:"capuccino.jpg"},44:{id:44,cat:4,label:"Thé",desc:"Tea time",prix:.5,img:"the.jpg"}})}(O2),function(a){a.createObject("bar.store.categories",{1:{label:"Soft",icon:"&#xEB41;"},2:{label:"Binouzes",icon:"&#xE544;"},3:{label:"Boissons alcoolisées",icon:"&#xE540;"},4:{label:"Miam-miam",icon:"&#xE552;"},5:{label:"Boissons Chaudes",icon:"&#xE541;"}})}(O2),function(a){a.createObject("bar.store.users",{1:{label:"Daedalus",pref:[17]},2:{label:"Neo",pref:[17,1,9]},3:{label:"Priguns",pref:[17,1]},4:{label:"Reebox",pref:[2]},5:{label:"Ralphy",pref:[17,1]},6:{label:"Briscoto",pref:[17,1]},7:{label:"Alex",pref:[17,1]},8:{label:"Max",pref:[12]},9:{label:"Sam",pref:[17,1]},10:{label:"Loïc",pref:[17,1]},11:{label:"Damien",pref:[17,1]},12:{label:"Laurent F.",pref:[17,1]},13:{label:"Rémi F.",pref:[17,1]}})}(O2),function(a,b){b.createClass("bar.App",{oView:null,oCtrl:null,__construct:function(){this.oView=new bar.View,this.oCtrl=new bar.Ctrl(this.oView)}})}(jQuery,O2),function(a,b){b.createClass("bar.Commande",{id:null,_commande:null,_oCommande:null,prix:0,__construct:function(b){var c=this;this._commande={},this._oCommande={},void 0!==b&&a.isPlainObject(b)&&(this._oCommande=b,b.cmd&&a.each(b.cmd,function(a,b){+b&&c.add(a,b)}),b.user&&b.user.forEach(function(a){c.add(a,1)}))},add:function(a,b){return this._commande[a]?this._commande[a]+=b:this._commande[a]=b,this.prix+=bar.store.articles[a].prix*b,this},getCommande:function(){return a.map(this._commande,function(b,c){if(bar.store.articles[c]){var d=a.extend({},bar.store.articles[c]);return d.qt=b,d}return null})},getPrix:function(){return Math.round(100*this.prix)/100},toLocalStorage:function(){var a=(new Date).toJSON(),b={};b[a]=this._oCommande,bar.helper.storage.export(b)},_initDivision:function(a){if(void 0===a)throw"Un nombre de carte est requis";for(var b,c=[],d=0;d<a;d++)b=new bar.Commande,b.id=d,c.push(b);return c},_tokenRing:function(a,b){var c;return a.forEach(function(a){if(a)for(var d=0;d<a.qt;d++)c=b.reduce(bar.helper.reduce.byKey("prix")),c.add(a.id,1)}),b},auPlusEquitable:function(a){var b=this._initDivision(a),c=this.getCommande();return c=c.sort(bar.helper.sort.byKey("prix")),this._tokenRing(c,b),b}})}(jQuery,O2),function(a,b){b.createObject("bar.config",{STORAGE_KEY:"bar",API_URL:"localhost"===window.location.hostname?"api/web/app_dev.php/":"api/web/"})}(jQuery,O2),function(a,b){b.createClass("bar.Ctrl",{$nbCarte:null,$diviser:null,$reset:null,$login:null,oView:null,__construct:function(b){var c=this;if(b){this.oView=b,this.$contentWrapper=a("#contentWrapper"),this.$reset=a("#resetBtn").on("click",function(){var a=c._serializeForm();c.$contentWrapper[0].reset(),c.$contentWrapper.trigger("change"),c.$contentWrapper.find("input").trigger("change"),Materializer.toast({toast:{message:"La commande a été vidée"},btn:[{label:"Annuler",color:"red",click:function(){c.$contentWrapper.deserializeObject(a)}}]})}),this.$nbCarte=a("#nbCarte"),this.$restore=a("#restoreBtn").on("click",function(){var a=bar.helper.storage.import();delete a.tmp,b.showHistory(a)}),this.$diviser=a("#diviserBtn").on("click",function(){var a=+c.$nbCarte.val(),d=c._serializeForm();d=new bar.Commande(d),b.showFacture(d,a)}),this.$login=a("#loginBtn").on("click",function(){var b=a('<div class="col s12">');if(bar.store.login)a('<form class="col s12 active"><div class="row"><div class="input-field col s6"><input id="m-username" name="username" value="'+bar.store.login.username+'" type="text"><label for="m-username" class="active">Username</label></div><div class="input-field col s6"><input id="m-password" name="password" value="" type="password"><label for="m-password">Password (vide = pas de modification)</label></div><div class="input-field col s6"><input id="m-label" name="label" value="'+bar.store.login.label+'" type="text"><label for="m-label" class="active">Label</label></div><div class="input-field col s6"><input id="m-password2" value="" type="password"><label for="m-password2">Confirmez password</label></div><input class="hide" type="submit" /></div></form>').on("submit",function(b){b.preventDefault();var d=a(this),f=d.serializeObject();if(d.find("#m-password2").val()!==f.password)return void Materialize.toast("Les mots de passe ne sont pas identique",2e3);f.id=bar.store.login.id,f.password||delete f.password,c.flushProfile(f).done(function(){Materialize.toast("Votre profil à été mis à jour",2e3),c.oView.makeUserAddons(),e.modal("close")})}).appendTo(b);else{var d=a('<ul class="tabs tabs-fixed-width">').appendTo(b);a('<li class="tab col s3"><a href="#log">Login</a></li>').appendTo(d),a('<form id="log" class="col s12"><div class="row"><div class="input-field col s6"><input id="l-username" name="username" type="text"><label for="l-username">Login</label></div><div class="input-field col s6"><input id="l-password" name="password" type="password"><label for="l-password">Password</label></div><input class="hide" type="submit" /></div></form>').on("submit",function(b){b.preventDefault();var c=a(this).serializeArray();Materializer.ajax({url:bar.config.API_URL+"login",method:"POST",data:c}).done(function(a){bar.store.login=bar.store.users[a.id],Materialize.toast("Bonjour "+a.label,2e3),e.modal("close")})}).appendTo(b),a('<li class="tab col s3"><a href="#register">S\'enregistrer</a></li>').appendTo(d),a('<form id="register" class="col s12"><div class="row"><div class="input-field col s6"><input id="r-username" name="username" type="text"><label for="r-username">Login</label></div><div class="input-field col s6"><input id="r-password" name="password"  type="password"><label for="r-password">Password</label></div><input class="hide" type="submit" /></div></form>').on("submit",function(b){b.preventDefault();var d=a(this).serializeObject();c.flushProfile(d).done(function(a){Materialize.toast("Bienvenue "+a.label,2e3),c.oView.makeUserAddons(),e.modal("close")})}).appendTo(b)}var e=Materializer.createModal({content:b,type:"bottom-sheet with-tabs",footer:{Ok:{callback:function(a,b){b.on("click",function(){a.find("form.active").trigger("submit")})}}}})}),a(".help").on("click",function(a){a.preventDefault(),c.discover()});var d=null;this.$contentWrapper.on("change",function(){var b=c._serializeForm();b.cmd&&(b.cmd=b.cmd.filter(bar.helper.filter.empty),b.cmd.length||delete b.cmd);var e=[];b.fav&&(e=b.fav,delete b.fav),bar.store.login&&(d&&clearTimeout(d),d=setTimeout(function(){JSON.stringify(bar.store.login.pref)!==JSON.stringify(e.map(function(a){return+a}))&&c.flushProfile({id:bar.store.login.id,pref:e.map(function(a){return{id:a}})}).done(function(){Materialize.toast("Vos favoris ont été persistés",2e3),c.oView.makeUserAddons()})},2e3)),a.isEmptyObject(b)?(c.$diviser.removeClass("scale-in").addClass("scale-out"),c.$reset.removeClass("scale-in").addClass("scale-out"),c.$restore.removeClass("scale-out").addClass("scale-in"),bar.helper.storage.export({tmp:null})):(c.$diviser.removeClass("scale-out").addClass("scale-in"),c.$reset.removeClass("scale-out").addClass("scale-in"),c.$restore.removeClass("scale-in").addClass("scale-out"),bar.helper.storage.export({tmp:c._serializeForm()}))}),this.init()}},init:function(){var b=this;Materializer.ajax(bar.config.API_URL).done(function(c){bar.store=c,Materializer.ajax(bar.config.API_URL+"login").done(function(b){b&&(bar.store.login=bar.store.users[b.id],a.extend(bar.store.login,b),Materialize.toast("Bonjour "+b.label,2e3))}).always(function(){b.oView.showHome(),b.oView.makeUserAddons(),a('input[type="number"]').on("click",function(){this.select()}).on("change",function(){var b=a(this);+b.val()<0&&(Materialize.toast("Le bar ne fait pas crédit !",2e3),b.val(0));var c=b.closest(".collapsible-body"),d=c.find('input[type="number"]').serializeArray().reduce(function(a,b){return a+ +b.value},0);c.siblings(".collapsible-header").find(".badge").text(d||"")}),a("select").material_select();var c=bar.helper.storage.import();c?c.tmp&&(b.$contentWrapper.deserializeObject(c.tmp),Materialize.toast("Commande temporaire restaurée",2e3)):this.discover(),b.$contentWrapper.materializeLayout(),a(".splash").addClass("disappear")})})},flushProfile:function(b){if(a.isPlainObject(b)){var c;return c=b.id?bar.config.API_URL+"user":bar.config.API_URL+"register",Materializer.ajax({url:c,method:"POST",data:JSON.stringify(b),contentType:"application/json"}).done(function(b){var c=bar.store.users[b.id];c?a.extend(c,b):bar.store.users[b.id]=bar.store.login=b})}return null},_serializeForm:function(){return this.$contentWrapper.serializeObject()},discover:function(){var b;b=this.$diviser.hasClass("scale-in")?"diviser":"restore",a('.tap-target[data-activates="'+b+'"]').tapTarget("open")}})}(jQuery,O2),function(a,b){b.createObject("bar.helper",{pluralize:function(a){return Array.isArray(a)?a.length>1?"s":"":"string"==typeof a?a+"s":+a>1?"s":""},delete:{null:function(a,b,c){null===a&&delete c[b]},zero:function(a,b,c){null!==a&&void 0!==a&&"0"===a.toString()&&delete c[b]},empty:function(a,b,c){+a||delete c[b]}},filter:{null:function(a){return null!==a},zero:function(a){return"0"!==a.toString()},empty:function(a){return+a}},sort:{byKey:function(a){return function(b,c){return b[a]>c[a]?-1:b[a]<c[a]?1:0}}},reduce:{byMethod:function(a){return function(b,c){return b[a]()<=c[a]()?b:c}},byKey:function(a){return function(b,c){return b[a]<=c[a]?b:c}}},storage:{_getStorage:function(){var a=localStorage.getItem(bar.config.STORAGE_KEY);return a?JSON.parse(a):{}},_setStorage:function(a){localStorage.setItem(bar.config.STORAGE_KEY,JSON.stringify(a))},import:function(){var a,b=this._getStorage();if(b)for(var c in b)b.hasOwnProperty(c)&&b.date&&(a=b[c],a.hasOwnProperty("user")&&a.user.forEach(bar.helper.delete.null),a.hasOwnProperty("cmd")&&a.cmd.forEach(bar.helper.delete.empty));return b},export:function(b){var c=this._getStorage();a.extend(!0,c,b);for(var d in c)c[d]||delete c[d];this._setStorage(c)}}})}(jQuery,O2),function(a,b){b.createClass("bar.View",{$contentWrapper:null,__construct:function(){this.$contentWrapper=a("#contentWrapper")},showHome:function(){var b={},c=a('<ul class="collapsible" data-collapsible="expandable">').appendTo(a('<div class="col s12">').appendTo(this.$contentWrapper));a.each(bar.store.categories,function(d,e){var f=a('<div class="collapsible-body row">');b[e.id]=f,a('<li><div class="collapsible-header"><span class="badge"></span><i class="material-icons">'+e.icon+"</i>"+e.label+"</div></li>").appendTo(c).append(f)}),a.each(bar.store.articles,function(c,d){a('<div class="col s6 m3 artCard"><div class="card"><div class="card-image"><img class="activator" src="src/img/'+d.id+'.jpg"><div class="floatingArea"><a class="btn-floating waves-effect waves-light orange"><i class="material-icons">&#xE15B;</i></a><input type="number" name="cmd['+d.id+']" min="0" value="0"/><a class="btn-floating waves-effect waves-light blue add"><i class="material-icons">&#xE145;</i></a></div><div class="starswitch"><label class="btn-floating waves-effect white"><input type="checkbox" '+(bar.store.login&&-1!==bar.store.login.pref.indexOf(d.id)?'checked="checked"':"")+' name="fav[]" value="'+d.id+'"><i class="material-icons blue-text star">&#xE838;</i><i class="material-icons black-text">&#xE83A;</i></label></div></div><div class="card-content not-too-large"><span class="card-title activator black-text truncate">'+d.label+"</span><p>"+d.prix+'€<i class="material-icons activator right">more_vert</i></p></div><div class="card-reveal"><span class="card-title grey-text text-darken-4">'+d.label+'<i class="material-icons right">close</i></span><p>'+(d.desc||"Aucune description")+"</p></div></div></div>").appendTo(b[d.cat])}),this.$contentWrapper.find(".floatingArea .btn-floating").on("click",function(){var b=a(this),c=b.siblings("input");if(b.hasClass("add"))c.val(+c.val()+1);else{+c.val()-1>=0&&c.val(+c.val()-1)}c.trigger("change")}),c.collapsible()},makeUserAddons:function(){var b=null;if(a.isPlainObject(bar.store.users)){if(this.$userAddons){this.$contentWrapper.serializeObject().user&&(b={user:this.$contentWrapper.serializeObject().user}),this.$userAddons.remove()}var c=this.$userAddons=a('<div class="input-field col s12">');a('<i class="material-icons prefix">&#xE8EF;</i>').appendTo(c);var d=a('<input data-target="quickBillModal" class="" readonly="true" data-activates="select-user-pref" value="Choisissez des participants..." type="text" />').appendTo(c),e=a('<div id="quickBillModal" class="modal bottom-sheet">').appendTo(c),f=a('<div class="modal-content">').appendTo(e),g=a('<ul class="modal-list">').appendTo(f),h=a();a.each(bar.store.users,function(b,c){a('<li class="optgroup"><span>'+(c.label||"???")+"</span></li>").appendTo(g),Array.isArray(c.pref)&&c.pref.forEach(function(c){bar.store.articles[c]&&h.push(a('<li class="optgroup-option"><span><input type="checkbox" name="user['+b+']" value="'+c+'"><label></label>'+bar.store.articles[c].label+"</span></li>").appendTo(g)[0])})}),c.append('<label class="active">QuickBill</label>'),h.on("click",function(b){var c=a(this);if(b.stopPropagation(),b.preventDefault(),c.is(".optgroup-option:not(.disabled)")){var e=c.find('input[type="checkbox"]');e.prop("checked",function(a,b){return!b});e.trigger("change")}else c.is(".optgroup-option.disabled")&&d.dropdown("close")}).find('input[type="checkbox"]').on("change",function(){var b={},c=a(this),e=c.closest("li");if(c.prop("checked")){e.addClass("active");a().add(e.prevUntil(".optgroup",".active")).add(e.nextUntil(".optgroup",".active")).trigger("click")}else e.removeClass("active");h.filter(".active").each(function(){var c=a(this).text();b[c]=b[c]?b[c]+1:1});var f="";for(var g in b)f&&(f+=", "),f+=b[g]+" "+g;d.val(f||"Choisissez des participants...")}),this.$contentWrapper.on("reset",function(){h.removeClass("active")}),c.prependTo(this.$contentWrapper),d.on("click",function(){window.location.hash="quickBill"}),e.modal(),a(window).on("hashchange",function(){e.hasClass("open")&&"#quickBill"!==window.location.hash&&e.modal("close")}),b&&this.$contentWrapper.deserializeObject(b)}},_get$tab:function(b,c){var d={$tab:null,$content:null};d.$tab=a('<li class="tab col s3"><a href="#'+b+'">'+b+"</a></li>"),d.$content=a('<div id="'+b+'" class="col s12">'),d.$content.append("<h3>Total :"+c.getPrix()+"€<h3>");var e=a('<table class="striped bordered highlight">').appendTo(d.$content);return e.append("<tr><th>Article</th><th>Quantité</th><th>Prix</th></tr>"),c.getCommande().forEach(function(a){a&&a.qt&&e.append("<tr><td>"+a.label+"</td><td>"+a.qt+"</td><td>"+Math.round(a.qt*a.prix*100)/100+"€</td></tr>")}),d},_getAll$tab:function(a,b,c){var d=this,e=[];return e.push(this._get$tab("S",a)),b>1&&a[c](b).forEach(function(a){e.push(d._get$tab(a.id+1,a))}),e},showFacture:function(b,c,d){d=d||"auPlusEquitable";var e=a('<div class="col s12 fixed-tabs-wrapper">');if(!(c=~~c))return void Materialize.toast("Vous devez au moins avoir une carte",2e3);if(c<0)return void Materialize.toast("Le bar ne fait pas crédit !",2e3);if(0===b.getPrix())return void Materialize.toast("Votre commande est vide",2e3);var f=a('<ul class="tabs tabs-fixed-width">').appendTo(e);this._getAll$tab(b,c,d).forEach(function(a){f.append(a.$tab),e.append(a.$content)}),Materializer.createModal({content:e,type:"modal-fixed-footer",footer:{Annuler:{classe:"modal-close"},"Enregistrer et vider":{callback:function(c,d){d.on("click",function(){b.toLocalStorage(),a("#reset").trigger("click"),c.modal("close")})}},Enregistrer:{callback:function(a,c){c.on("click",function(){b.toLocalStorage(),a.modal("close")})}}}})},showHistory:function(b){if(a.isEmptyObject(b))return void Materialize.toast("L'historique est vide",2e3);var c=a('<div class="col s12 fixed-tabs-wrapper">'),d=a('<ul class="collapsible" data-collapsible="expandable">').appendTo(c);for(var e in b)d.prepend(this._get$accordion(e,b[e]));Materializer.createModal({content:c,type:"modal-fixed-footer",header:"Historique",footer:{Fermer:{classe:"modal-close"}}}),d.collapsible()},_get$accordion:function(b,c){var d=this,e=a('<div class="collapsible-body col s12">'),f=new Date(b);f=f.toFrench();var g=f;if(c.user&&c.user.length){var h=c.user.filter(bar.helper.filter.null);if(h.length){g+=" - "+h.length+" habitué"+bar.helper.pluralize(h);var i=a('<table class="striped bordered highlight">').appendTo(e);i.append('<tr><th style="width: 50%;">Habitué</th><th>Boisson</th></tr>'),c.user.forEach(function(a,b){null!==a&&i.append("<tr><td>"+bar.store.users[b].label+"</td><td>"+bar.store.articles[a].label+"</td></tr>")})}}if(c.cmd&&c.cmd.length){var j=c.cmd.filter(bar.helper.filter.empty);if(j.length){g+=" - "+j.length+" complément"+bar.helper.pluralize(j);var k=a('<table class="striped bordered highlight">').appendTo(e);k.append('<tr><th style="width: 50%;">Article</th><th>Quantité</th></tr>'),j.forEach(function(a,b){bar.store.articles[b]&&k.append("<tr><td>"+bar.store.articles[b].label+"</td><td>"+a+"</td></tr>")})}}var l=a('<div class="right-align">').prependTo(e);return a('<a class="btn btn-floating waves-effect waves-light btn red"><i class="material-icons right">&#xE92B;</i></a>').appendTo(l).on("click",function(){var c=a(this).closest("li.active"),d=c.closest(".collapsible");d.collapsible("close",d.find("li").index(c)),Vel(c,{opacity:0,marginLeft:"-50%",height:0},{duration:375,easing:"easeOutExpo",queue:!1,delay:375,complete:function(){c.addClass("hide")}});var e={};e[b]=null,bar.helper.storage.export(e)}),a('<a class="btn btn-floating waves-effect waves-light btn green"><i class="material-icons right">&#xE889;</i></a>').appendTo(l).on("click",function(){d.$contentWrapper.deserializeObject(c),a(this).closest(".modal").modal("close"),Materialize.toast("Restauration terminée !",2e3)}),a('<li><div class="collapsible-header truncate"><i class="material-icons">&#xE889;</i>'+g+"</div></li>").append(e)}})}(jQuery,O2);